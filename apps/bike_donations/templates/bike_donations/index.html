<html ng-app = "bikeSelect">
<head>


{% load staticfiles %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

	<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
<script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
<script type = "text/javascript" src = "https:ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular-cookies.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'bike_donations/styles/selectStyles.css' %}">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular-route.min.js"></script>



<!--<script type = "text/javascript" src = "{% static 'bike_donations/angular/app.js' %}"></script>-->
<script>
angular.module('bikeSelect', ['ngCookies','ngRoute'])
	.config(function($interpolateProvider, $httpProvider/*, $routeProvider*/) {

		// $routeProvider.when('/confirm', {
	  //    controller: 'confirmationController',
	  //    templateUrl: 'static/bike_donations/angular/partials/confirm.html'
	  //  });

		$interpolateProvider.startSymbol('[[').endSymbol(']]');
		$httpProvider.defaults.xsrfCookieName = 'csrftoken';
        $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
	});
</script>
<script type = "text/javascript" src = "{% static 'bike_donations/angular/services/boolService.js' %}"></script>
<script type = "text/javascript" src = "{% static 'bike_donations/angular/services/scrollService.js' %}"></script>
<script type = "text/javascript" src = "{% static 'bike_donations/angular/factories/bikeOptionsFactory.js' %}"></script>
<script type = "text/javascript" src = "{% static 'bike_donations/angular/controllers/omniOptionsController.js' %}"></script>
<script type = "text/javascript" src = "{% static 'bike_donations/angular/controllers/bikeOptionsController.js' %}"></script>
<script type = "text/javascript" src = "{% static 'bike_donations/angular/controllers/confirmationController.js' %}"></script>


</head>


<body>
<div class="container">

	<div id = "header">
		<h2>Add To Inventory Demo</h2>
		<img src="{% static 'bike_donations/resources/logoThing.jpg' %}" />
	</div>
	<div ng-controller = "omniOptionsController" id="buttonBoxDiv">
		<div id="buttonBox" class="row">

				<button id = 'bike' ng-click = "buttonClicked('bike')" class="btn btn-success col-xs-4">Bike</button>
				<button id = 'component' ng-click = "buttonClicked('component')" class="btn btn-warning col-xs-4">Component</button>
				<button id = 'other' ng-click = "buttonClicked('other')" class="btn btn-danger  col-xs-4">Other</button>

		</div>
	</div>
	<div ng-controller = "bikeOptionsController">
		<div id = "optionsBox">
			<form>
				{% csrf_token %}
				<div ng-if = "bikeOption && !productOption.status">

					<div id = "bike">

						<div class="row">
							<div class="col-xs-12">
								<h4>Select a bike</h4>
								<div class="check" ng-if="selected.type">
									<img class="checkmark" src = "{% static 'bike_donations/resources/lilcheck.png' %}">
								</div>
							</div>
						</div>

						<div class = "selectBox row">
							<div class="col-xs-5 col-xs-offset-3">
								<select ng-model="selected.type" size="5">
									<option ng-repeat = "(key, value) in bikeType" >[[key]]</option>
								</select>
							</div>
						</div>

					</div><!--closes bike -->

					<div id="brand" ng-if="selected.type && brand">
						<div class="row">
							<div class="col-xs-12">
								<h4>Select a Brand</h4>
								<div class = "check" ng-if = 'selected.brand'>
									<img class="checkmark" src = "{% static 'bike_donations/resources/lilcheck.png' %}">
								</div>
							</div>
						</div>

						<div class = "selectBox row">
							<div class="col-xs-5 col-xs-offset-3">
								<select ng-model="selected.brand" size = "5">
									<option ng-repeat = "(key, value) in brand">[[key]]</option>
								</select>
							</div>
						</div>

				</div> <!--closes brand -->

				<div id="cosmetic" ng-if = "selected.brand && cosmetic">

					<div class="row">
						<div class="col-xs-12">
							<h4>Select Cosmetic Quality</h4>
							<div class = "check" ng-if = 'selected.cosmetic'>
								<img class="checkmark" src = "{% static 'bike_donations/resources/lilcheck.png' %}">
							</div>
						</div>
					</div>

					<div class = "selectBox row">
						<div class="col-xs-5 col-xs-offset-3">
							<select ng-model="selected.cosmetic" size = "5">
								<option ng-repeat = "(key, value) in cosmetic">[[key]]</option>
							</select>
						</div>
					</div>

				</div><!--closes cosmetic-->

				<div id="frame" ng-if = "selected.cosmetic && frame">

					<div class="row">
						<div class="col-xs-12">
							<h4>Select a Frame</h4>
							<div class = "check" ng-if = 'selected.frame'>
								<img class="checkmark" src = "{% static 'bike_donations/resources/lilcheck.png' %}">
							</div>
						</div>
					</div>

					<div class = "selectBox row">
						<div class="col-xs-5 col-xs-offset-3">
							<select ng-model="selected['frame']" size = "4">
								<option ng-repeat = "(key, value) in frame">[[key]]</option>
							</select>
						</div>
					</div>

				</div><!-- closes frame-->

				<div id="features" ng-if = "selected.frame && features">

					<div class="row">
						<div class="col-xs-12">
								<h4>Add Features</h4>
								<div class = "check" ng-if = 'selected.features'>
									<img class="checkmark" src = "{% static 'bike_donations/resources/lilcheck.png' %}">
								</div>
						</div>
					</div>

					<div class = "checkBoxBox row">
						<div class="col-xs-5 col-xs-offset-3">
							<span ng-repeat="(key, value) in features">
								<label>
				    			<input type="checkbox" id="[[key]]" ng-click = "checkbox(key)"/>[[key]]<br>
				    		</label><br><br>
				  		</span>
						</div>
					</div>

					<div class="row" ng-if="selected.frame && features">
						<div class="col-xs-offset-8 col-xs-4">
							<form>
								<button class="btn btn-success" ng-click="confirm()">Confirm</button>
							</form>
						</div>
					</div>
				</div><!--closes features-->
			</div><!--closes ng-if bikeOption-->
		</form>

		<div ng-show="checkBike">
			<table class="table table-bordered table-responsive">
				<thead>
					<th>Model</th>
					<th>Brand</th>
					<th>Cosmetics</th>
					<th ng-if="assembled_bike.frame">Frame</th>
					<th>Features</th>
				</thead>
				<tbody>
					<tr>
						<td>[[assembled_bike.bikeType]]</td>
						<td>[[assembled_bike.brand]]</td>
						<td>[[assembled_bike.cosmetic]]</td>
						<td ng-if="assembled_bike.frame">[[assembled_bike.frame]]</td>
						<td>
							<p ng-repeat="feature in assembled_bike.features">
								[[feature]]
							</p>
						</td>
					</tr>
				</tbody>
			</table>
			<div class="row">
				<div class="col-xs-offset-5 col-xs-5">
					<form>{% csrf_token %}
						<div class="commit">
							<button ng-click="getBike()" class="btn btn-success">All Done</button>
							<button ng-click="goBack()" ng-if="!posted" class="btn btn-danger">Go Back</button>
						</div>
					</form>
				</div>
			</div>
			<div class="row text-center">
				<p ng-if="posted">Please wait while donation is added to inventory</p>
			</div>

		</div><!--ends ng-show for checkBike -->
	</div> <!-- end of #optionsBox -->
</div> <!-- end of bikeOptionsController -->

</body>



</html>
